---
layout: default
title: "NGS RAW data"
---

**Предыдущая концепция**

в {{ homedir }} каждого пользователя содержались каталоги ngs и ngs_foreign.
ngs - предназначен для хранения сырых данных для последующего использования командами внутри ibch.
ngs_foreign - предназначен для хранения сырых данных, доступных 3-им лицам за пределами ИБХ.

При размещении данных в этих каталогах информация из них автоматически переносилась в общую точку хранения сырых данных. Сервер storage1 для локации ibch и сервер micz для локации cz.
Каталоги соответственно:
 storage1: /data/ngs и /data/ngs_foreign.
 micz: /ngs и /ngs_foreign

Отдельный скрипт исправлял права на перенесенные данные, а в каталоги пользователей размещал символические ссылки на эти данные.
Отдельный скрипт синхронизировал данные между локациями cz <=> ibch по заданному расписанию

**Новый подход:**

I. ngs каталог будет разделен на ngs_ibch и ngs_cz из-за сложностей правильной синхронизации данных.<br/>
ngs-ibch - доступен для записи пользователям локации ibch. в локации cz доступен только для чтения<br/>
ngs-cz - досупен для записи в cz локации. в ibch доступен только для чтения

II. Сырые данные без дополнительных метаданных достаточно быстро превращаются в тыкву. Поэтому одна из главных задач - продумать и реализовать удобный для всех механизм публикации данных вместе с обязательными метаданными. Да, метадата становится обязательной в минимально необходимом объеме. Также она позволит отказаться от каталога ngs_foreign, сэкономив место.

Файл метаданных будет представлять собой обычный текстовый файл в одном из INI или YAML форматов (обсуждаемо) зарезервированного имени (обсуждаемо).

Приблизительный набор метаданных :

| name | type | required | description |
| :--- | :--- | :---: | :--- |
| date | date&time, timestamp | yes | Дата исследования. Если по каким-то причинам не указана, используется "приблизительная дата" на основе даты выкладки. От оповещений (см. ниже) не избавляет |
| foreign | boolean | no | Данные могут доступны для чтения третьим лицам |
| name | string | no | ФИО сотрудника, проводившего исследования. Если не указано явно, подставляются данные на основе логина пользователя, разместившего данные |
| description | text | no | Любая сопутствующая информация в произвольном формате |

Если какие-то из обязательных данных не заполнены, то человеку, который выложил данные, отравляются автоматические напоминания по email, telegram о необходимости это сделать. Если в течение какого-то ограниченного периода (предположительно 2-4 недели) информация все еще не заполнена, то аналогичные напоминания начинают отправляться непосредственному руководителю сотрудника.
